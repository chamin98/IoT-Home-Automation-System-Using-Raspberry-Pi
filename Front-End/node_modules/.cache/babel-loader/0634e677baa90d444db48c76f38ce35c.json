{"ast":null,"code":"import _slicedToArray from\"E:/apps/CSE_Iot_Home/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{db}from'./services/firebaseServices';import{ref,onValue,query,limitToLast}from\"firebase/database\";import{Header,Stats,Control}from'./components/components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentTemperature=_useState2[0],setCurrentTemperature=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),temperatures=_useState4[0],setTemperatures=_useState4[1];var _useState5=useState([['Relay 1',false],['Relay 2',false],['Relay 3',false]]),_useState6=_slicedToArray(_useState5,2),relays=_useState6[0],setRelays=_useState6[1];useEffect(function(){onValue(ref(db,'mlx90614/current'),function(snapshot){var data=snapshot.val();setCurrentTemperature(data.ambient);});onValue(query(ref(db,\"mlx90614/history/\"),limitToLast(20)),function(snapshot){var childData=[];snapshot.forEach(function(childSnapshot){childData.push(childSnapshot.val());});setTemperatures(childData);}//{onlyOnce: true}\n);onValue(ref(db,'Relays'),function(snapshot){var data=snapshot.val();setRelays([['Fan',data.Relay1],['Switch',data.Relay2],['Light',data.Relay3]]);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Stats,{currentTemperature:currentTemperature,temperatures:temperatures}),\" \",/*#__PURE__*/_jsx(Control,{relays:relays}),\" \"]});};export default App;","map":{"version":3,"names":["useState","useEffect","db","ref","onValue","query","limitToLast","Header","Stats","Control","App","currentTemperature","setCurrentTemperature","temperatures","setTemperatures","relays","setRelays","snapshot","data","val","ambient","childData","forEach","childSnapshot","push","Relay1","Relay2","Relay3"],"sources":["E:/apps/CSE_Iot_Home/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { db } from './services/firebaseServices';\r\nimport { ref, onValue, query, limitToLast } from \"firebase/database\";\r\nimport { Header, Stats, Control } from './components/components'\r\n\r\n\r\nconst App = () => {\r\n    const [currentTemperature, setCurrentTemperature] = useState()\r\n    const [temperatures, setTemperatures] = useState([])\r\n    const [relays, setRelays] = useState([\r\n        ['Relay 1', false],\r\n        ['Relay 2', false],\r\n        ['Relay 3', false]\r\n    ])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        onValue(ref(db, 'mlx90614/current'), snapshot => {\r\n            const data = snapshot.val()\r\n            setCurrentTemperature(data.ambient)\r\n        })\r\n\r\n        onValue(query(ref(db, \"mlx90614/history/\"), limitToLast(20)), snapshot => {\r\n                let childData = []\r\n                snapshot.forEach((childSnapshot) => {\r\n                    childData.push(childSnapshot.val())\r\n                })\r\n                setTemperatures(childData)\r\n            }, //{onlyOnce: true}\r\n        );\r\n\r\n        onValue(ref(db, 'Relays'), snapshot => {\r\n            const data = snapshot.val()\r\n            setRelays([\r\n                ['Fan', data.Relay1],\r\n                ['Switch', data.Relay2],\r\n                ['Light', data.Relay3]\r\n            ])\r\n        })\r\n    }, [])\r\n    return ( <\r\n        div className = \"container\" >\r\n        <\r\n        Header / >\r\n        <\r\n        Stats currentTemperature = { currentTemperature }\r\n        temperatures = { temperatures }\r\n        /> <\r\n        Control relays = { relays }\r\n        /> < /\r\n        div >\r\n    )\r\n}\r\n\r\nexport default App;"],"mappings":"0GAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,EAAE,KAAQ,6BAA6B,CAChD,OAASC,GAAG,CAAEC,OAAO,CAAEC,KAAK,CAAEC,WAAW,KAAQ,mBAAmB,CACpE,OAASC,MAAM,CAAEC,KAAK,CAAEC,OAAO,KAAQ,yBAAyB,yFAGhE,GAAMC,IAAG,CAAG,QAANA,IAAG,EAAS,CACd,cAAoDV,QAAQ,EAAE,wCAAvDW,kBAAkB,eAAEC,qBAAqB,eAChD,eAAwCZ,QAAQ,CAAC,EAAE,CAAC,yCAA7Ca,YAAY,eAAEC,eAAe,eACpC,eAA4Bd,QAAQ,CAAC,CACjC,CAAC,SAAS,CAAE,KAAK,CAAC,CAClB,CAAC,SAAS,CAAE,KAAK,CAAC,CAClB,CAAC,SAAS,CAAE,KAAK,CAAC,CACrB,CAAC,yCAJKe,MAAM,eAAEC,SAAS,eAWxBf,SAAS,CAAC,UAAM,CACZG,OAAO,CAACD,GAAG,CAACD,EAAE,CAAE,kBAAkB,CAAC,CAAE,SAAAe,QAAQ,CAAI,CAC7C,GAAMC,KAAI,CAAGD,QAAQ,CAACE,GAAG,EAAE,CAC3BP,qBAAqB,CAACM,IAAI,CAACE,OAAO,CAAC,CACvC,CAAC,CAAC,CAEFhB,OAAO,CAACC,KAAK,CAACF,GAAG,CAACD,EAAE,CAAE,mBAAmB,CAAC,CAAEI,WAAW,CAAC,EAAE,CAAC,CAAC,CAAE,SAAAW,QAAQ,CAAI,CAClE,GAAII,UAAS,CAAG,EAAE,CAClBJ,QAAQ,CAACK,OAAO,CAAC,SAACC,aAAa,CAAK,CAChCF,SAAS,CAACG,IAAI,CAACD,aAAa,CAACJ,GAAG,EAAE,CAAC,CACvC,CAAC,CAAC,CACFL,eAAe,CAACO,SAAS,CAAC,CAC9B,CAAG;AAAA,CACN,CAEDjB,OAAO,CAACD,GAAG,CAACD,EAAE,CAAE,QAAQ,CAAC,CAAE,SAAAe,QAAQ,CAAI,CACnC,GAAMC,KAAI,CAAGD,QAAQ,CAACE,GAAG,EAAE,CAC3BH,SAAS,CAAC,CACN,CAAC,KAAK,CAAEE,IAAI,CAACO,MAAM,CAAC,CACpB,CAAC,QAAQ,CAAEP,IAAI,CAACQ,MAAM,CAAC,CACvB,CAAC,OAAO,CAAER,IAAI,CAACS,MAAM,CAAC,CACzB,CAAC,CACN,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CACN,mBAAS,aACD,SAAS,CAAG,WAAW,wBAC3B,KACA,MAAM,IAAI,cACV,KACA,KAAK,EAAC,kBAAkB,CAAKhB,kBAAoB,CACjD,YAAY,CAAKE,YAAc,EAC7B,kBAAC,KACH,OAAO,EAAC,MAAM,CAAKE,MAAQ,EACzB,OACG,CAEb,CAAC,CAED,cAAeL,IAAG"},"metadata":{},"sourceType":"module"}